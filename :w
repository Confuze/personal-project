import { useContext } from "react";
import { AnswersContext } from "./context";

export function useScore(date) {
  console.log(date);
  console.log(answers);
  const { answers } = useContext(AnswersContext);

  if (!answers) return null;

  // TODO: write less messy algorithm than whatever this is
  const dietScore =
    (answers.animalBased * 2 + answers.local + answers.packages * 0.5) / 35;
  const goodsScore =
    (answers.clothes * 3 +
      answers.bags * 0.5 +
      answers.papers +
      answers.other) /
    56;
  const commuteScore =
    ((((answers.commuteType === 12 /*12 = car*/
      ? (answers.commuteType * answers.carType) / 6
      : answers.commuteType) *
      answers.commuteLength) /
      12) *
      (100 - answers.carfuel)) /
    50 /
    480; // this is incredibly messy but shouldâ„¢ work
  const appliancesScore =
    (((answers.lights * (100 - answers.houseEnergy)) / 50) *
      answers.houseSize) /
      600 +
    (answers.washing * 3) / 32;
  const otherScore =
    (answers.trash * (100 - answers.recycling + 40)) / 140 / 10;

  let finalScore =
    (1 -
      (dietScore +
        goodsScore +
        commuteScore * 1.5 +
        appliancesScore +
        (otherScore * 0.5) / 5) -
      answers.plane / 40) *
    100;
  if (finalScore < 0) finalScore = 0;

  return finalScore;
}
